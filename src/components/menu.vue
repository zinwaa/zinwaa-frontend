<template>
    <div class="menu">
        <div class="menuContext">
            <div class="menuContextItem active">
                <span>1</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14 2H6a2 2 0 0 0-2 2v16c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V8l-6-6z" />
                    <path d="M14 3v5h5M16 13H8M16 17H8M10 9H8" />
                </svg>
            </div>
            <div class="menuContextItem active">
                <span>2</span>
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="500"
                    height="500" viewBox="-50 -50 600 600" xml:space="preserve">
                    <g transform="matrix(1 0 0 1 38.7268502618 524.2324117206)" id="OeVOowxX7r6zoRCHZS2Bm">
                        <path
                            style="stroke: rgb(0,0,0); stroke-width: 10; stroke-dasharray: none; stroke-linecap: round; stroke-dashoffset: 0; stroke-linejoin: round; stroke-miterlimit: 10; fill: none; fill-rule: nonzero; opacity: 1;"
                            transform=" translate(-38.7268502618, -524.2324117206)"
                            d="M 39.09617245722533 524.2324117206188 Q 39.09717245722533 524.2324117206188 38.726802086854946 524.2324117206188 L 38.35743171648456 524.2324117206188"
                            stroke-linecap="round"></path>
                    </g>
                    <g transform="matrix(1.3089668662 0 0 1.3089668662 250.142208982 250.142208982)"
                        id="Knq6yY5zaesBQW7F0Hr5-">
                        <path
                            style="stroke: rgb(49,168,247); stroke-width: 10; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: none; fill-rule: nonzero; opacity: 1;"
                            transform=" translate(0, 0)"
                            d="M 0 -190.27304 C 105.03072 -190.27304 190.27304 -105.03072 190.27304 0 C 190.27304 105.03072 105.03072 190.27304 0 190.27304 C -105.03072 190.27304 -190.27304 105.03072 -190.27304 0 C -190.27304 -105.03072 -105.03072 -190.27304 0 -190.27304 z"
                            stroke-linecap="round"></path>
                    </g>
                    <g transform="matrix(1.6353243661 0 0 1.6353243661 248.4364542965 256.1894788311)"
                        id="VgD6CPWzvS27DxwyiBWH5">
                        <path
                            style="stroke: rgb(49,168,247); stroke-width: 10; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(255,255,255); fill-opacity: 0; fill-rule: nonzero; opacity: 1;"
                            transform=" translate(-114.728795, -95.0097895806)"
                            d="M 154.61117 109.84578 C 136.61389 118.97117 118.77022999999998 119.96359000000001 104.51717 118.2594 C 98.47009 117.65071999999999 92.14990999999999 116.37998999999999 85.71887 114.1906 C 78.75115 111.98592000000001 74.61117 109.84578 74.61117 109.84578 C 74.61117 109.84578 48.74086 183.58867 14.611170000000001 189.84578 C -19.518519999999995 196.10289 14.133350000000002 31.46124999999998 34.61117 9.84577999999999 C 55.08899 -11.769690000000008 74.61117 9.84577999999999 74.61117 9.84577999999999 C 74.61117 9.84577999999999 74.63189 10.413479999999991 74.84642 11.357639999999991 L 74.84642 9.606879999999991 C 74.84642 9.606879999999991 75.59727 29.03804999999999 114.84642 29.60687999999999 C 117.75182 29.64898999999999 120.44626 29.57526999999999 122.94506 29.40263999999999 C 153.9706 26.422969999999992 154.61117 9.84577999999999 154.61117 9.84577999999999 L 154.61117 11.11873999999999 C 154.82569999999998 10.17457999999999 154.84642 9.60687999999999 154.84642 9.60687999999999 C 154.84642 9.60687999999999 174.3686 -12.008590000000009 194.84642 9.60687999999999 C 215.32424 31.222349999999988 248.97611 195.86399 214.84642 189.60688 C 180.71672999999998 183.34976999999998 154.84642 109.60687999999999 154.84642 109.60687999999999 C 154.84642 109.60687999999999 154.76684 109.64801999999999 154.61117 109.72476999999999 z"
                            stroke-linecap="round"></path>
                    </g>
                    <g transform="matrix(0.8255690414 0 0 0.8255690414 151.0460511901 222.753932652)"
                        id="ZNKzZdiltCldJ9Zby3aSI">
                        <path
                            style="stroke: none; stroke-width: 10; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(49,168,247); fill-rule: nonzero; opacity: 1;"
                            transform=" translate(-40, -40)"
                            d="M 80 52.5 L 52.5 52.5 L 52.5 80 L 27.5 80 L 27.5 52.5 L 0 52.5 L 0 27.5 L 27.5 27.5 L 27.5 0 L 52.5 0 L 52.5 27.5 L 80 27.5 L 80 52.5 z"
                            stroke-linecap="round"></path>
                    </g>
                    <g transform="matrix(1.6353243661 0 0 1.6353243661 346.1795297869 222.9298652517)"
                        id="w4qVwdspvtT08wbwAAIrL">
                        <path
                            style="stroke: rgb(49,168,247); stroke-width: 0; stroke-dasharray: none; stroke-linecap: butt; stroke-dashoffset: 0; stroke-linejoin: miter; stroke-miterlimit: 4; fill: rgb(49,168,247); fill-rule: nonzero; opacity: 1;"
                            transform=" translate(0, 0)"
                            d="M 0 -19.62457 C 10.83276 -19.62457 19.62457 -10.832759999999999 19.62457 0 C 19.62457 10.83276 10.832759999999999 19.62457 0 19.62457 C -10.83276 19.62457 -19.62457 10.832759999999999 -19.62457 0 C -19.62457 -10.83276 -10.832759999999999 -19.62457 0 -19.62457 z"
                            stroke-linecap="round"></path>
                    </g>
                </svg>
            </div>
            <div class="menuContextItem active">
                <span>3</span>
            </div>
            <div class="menuContextItem active">
                <span>Contact me</span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M20 14.66V20a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h5.34"></path>
                    <polygon points="18 2 22 6 12 16 8 16 8 12 18 2"></polygon>
                </svg>
            </div>
        </div>
        <div class="menuIcon">
            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="500"
                height="500" viewBox="0 0 500 500" xml:space="preserve">
                <g transform="matrix(1 0 0 1 250 250.2844141069)" id="Ym6Ttltl5jgla3TNZqGRm">
                    <path
                        style="stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 4; fill-rule: nonzero; opacity: 1;"
                        transform=" translate(0, 0)"
                        d="M -150.73948 -208.61775 L 229.80660000000003 -208.61775 L 229.80660000000003 -148.96634 L -15.358359999999976 95.62978999999999 L 151.87713000000002 95.62978999999999 L 151.87713000000002 208.61773999999997 L -229.8066 208.61773999999997 L -229.8066 148.96632999999997 L 14.789529999999985 -96.19863000000004 L -150.73948000000001 -96.19863000000004 z"
                        stroke-linecap="round" class="icon" />
                </g>
            </svg>
        </div>
    </div>
</template>


<script setup lang='ts'>
import { ref, onMounted } from 'vue';
// 查找目标元素在父元素中的位置
function findIndex(childrenDom: Element, parent: Element) {
    if (childrenDom === null) {
        return -1;
    }
    for (let i = 0; i < parent.children.length; i++) {
        if (childrenDom === parent.children[i]) {
            return i;
        }
    }
}
onMounted(() => {
    const menuDom = document.getElementsByClassName('menuContext')[0] as HTMLDivElement;
    const itemDom = document.getElementsByClassName('menuContextItem');
    for (const item of itemDom) {

        item.addEventListener('click', () => {
            let index = findIndex(item, menuDom);
            console.log(index);
        })
    }
})
</script>


<style scoped lang="scss">
.menu {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-around;
    height: 100%;
    width: 100%;
    z-index: 1000;
    transition: all 0.5s ease-out;
    opacity: 1;

    .menuContext {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        transition: all 0.5s ease-out;
        margin-left: 40px;
        opacity: 1;
        gap: 20px;

        div {
            color: #00AAFF;
            font-size: 6vw;
            font-weight: 800;
            font-style: italic;
            transition: transform 0.5s ease-in-out, background-size 0.2s ease-in-out;
            cursor: pointer;
            padding: 0 10px;
            background: linear-gradient(to right, #90daff, #00B4DB) no-repeat bottom right;
            background-size: 0px 6px;
            display: flex;
            align-items: center;

            svg {
                width: 40px;
                height: 40px;
                object-fit: cover;
                transition: all 0.5s ease-out;
            }

            &:hover {
                background-position: left bottom;
                background-size: 100% 6px;
            }

            @for $i from 1 through 4 {
                &:nth-child(#{$i}) {
                    opacity: 0;
                    animation: active#{$i} 1s forwards ($i*0.3s+3s);

                    @keyframes active#{$i} {
                        0% {
                            transform: translateX((-$i*15px)-15px);
                            opacity: 0;
                        }

                        100% {
                            transform: translateX(-$i*15px);
                            opacity: 1;
                        }
                    }
                }
            }

        }

    }

    // .active {}

    .menuIcon {
        transition: all 0.5s ease-out;
        opacity: 1;

        svg {
            width: 40vw;
            top: 0.7vw;
            position: relative;
            transition: all 0.5s;

            .icon {
                stroke: white;
                stroke-dasharray: 2135;
                stroke-dashoffset: -2135;
                transition: all 0.5s;
                fill: aliceblue;
                animation: stroke 2s linear forwards 3.5s;
                stroke-width: 2;
                fill: none;

                @keyframes stroke {
                    0% {
                        stroke-dashoffset: -2135;
                        fill: none;
                        fill-opacity: 0;
                    }

                    50% {
                        stroke-dashoffset: 0;
                        fill: none;
                        fill-opacity: 0;
                    }

                    100% {
                        stroke-dashoffset: 0;
                        fill-opacity: 1;
                        fill: aliceblue;
                    }
                }
            }
        }
    }
}</style>